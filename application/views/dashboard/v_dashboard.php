<div class="container-fluid">

	<!-- Title -->
	<div class="row heading-bg">
		<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
			<h5 class="txt-dark">DASHBOARD <i class="fa fa-home mr-20"></i></h5>
		</div>
		<div class="col-lg-5 col-sm-8 col-md-8 col-xs-12">
		</div>
		<!-- Breadcrumb -->
		<div class="col-lg-4 col-sm-8 col-md-8 col-xs-12">
		</div>
		<!-- /Breadcrumb -->
	</div>
	<!-- /Title -->
	<!-- Row -->
	<div class="row">
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view pa-0">
				<div class="panel-wrapper collapse in">
					<div class="panel-body pa-0">
						<div class="sm-data-box bg-red">
							<div class="container-fluid">
								<div class="row">
									<div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
										<span class="txt-light block counter"><span class="counter-anim"><div id="show_active_student">0</div></span></span>
										<span class="weight-500 uppercase-font txt-light block font-13">Siswa Aktif</span>
									</div>
									<div class="col-xs-6 text-center  pl-0 pr-0 data-wrap-right">
										<i class="zmdi zmdi-male-female txt-light data-right-rep-icon"></i>
									</div>
								</div>	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view pa-0">
				<div class="panel-wrapper collapse in">
					<div class="panel-body pa-0">
						<div class="sm-data-box bg-yellow">
							<div class="container-fluid">
								<div class="row">
									<div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
										<span class="txt-light block counter"><span class="counter-anim"><div id="show_all_student">0</div></span></span>
										<span class="weight-500 uppercase-font txt-light block">Jumlah Siswa</span>
									</div>
									<div class="col-xs-6 text-center  pl-0 pr-0 data-wrap-right">
										<i class="fa fa-child txt-light data-right-rep-icon"></i>
									</div>
								</div>	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view pa-0">
				<div class="panel-wrapper collapse in">
					<div class="panel-body pa-0">
						<div class="sm-data-box bg-green">
							<div class="container-fluid">
								<div class="row">
									<div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
										<span class="txt-light block counter"><span class="counter-anim"><div id="show_active_teacher">0</div></span></span>
										<span class="weight-500 uppercase-font txt-light block">Pengajar Aktif</span>
									</div>
									<div class="col-xs-6 text-center  pl-0 pr-0 data-wrap-right">
										<i class="fa fa-male txt-light data-right-rep-icon"></i>
									</div>
								</div>	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view pa-0">
				<div class="panel-wrapper collapse in">
					<div class="panel-body pa-0">
						<div class="sm-data-box bg-blue">
							<div class="container-fluid">
								<div class="row">
									<div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
										<span class="txt-light block counter"><span class="counter-anim"><div id="">0</div></span></span>
										<span class="weight-500 uppercase-font txt-light block">Staff Aktif</span>
									</div>
									<div class="col-xs-6 text-center  pl-0 pr-0 data-wrap-right">
										<i class="fa fa-male txt-light data-right-rep-icon"></i>
									</div>
								</div>	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Row -->
	<!-- Row -->
	<div class="row">
		<div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view">
				<div class="panel-heading">
					<div class="pull-left">
						<h6 class="panel-title txt-dark">Informasi dan Status Pendidikan</h6>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="panel-wrapper collapse in">
					<div class="panel-body row">
						<div class="">
							<div class="pl-15 pr-15 mb-15">
								<div class="pull-left">
									<i class="fa fa-university inline-block mr-10 font-16"></i>
									<span class="inline-block txt-dark">Periode</span>
								</div>	
								<span class="inline-block txt-warning pull-right weight-500" id="periode">-</span>
								<div class="clearfix"></div>
							</div>
							<hr class="light-grey-hr mt-0 mb-15"/>
							<div class="pl-15 pr-15 mb-15">
								<div class="pull-left">
									<i class="fa fa-trophy inline-block mr-10 font-16"></i>
									<span class="inline-block txt-dark">Semester</span>
								</div>	
								<span class="inline-block txt-danger pull-right weight-500" id="semester">-</span>
								<div class="clearfix"></div>
							</div>
							<!-- <hr class="light-grey-hr mt-0 mb-15"/>
							<div class="pl-15 pr-15 mb-15">
								<div class="pull-left">
									<i class="zmdi zmdi-ticket-star inline-block mr-10 font-16"></i>
									<span class="inline-block txt-dark">Support Tickets</span>
								</div>	
								<span class="inline-block txt-primary pull-right weight-500">43</span>
								<div class="clearfix"></div>
							</div> -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view">
				<div class="panel-heading">
					<div class="pull-left">
						<h6 class="panel-title txt-dark">Daftar Kegiatan HSPG Tebet</h6>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="panel-wrapper collapse in">
					<div class="panel-body">
						<div>
							<span class="pull-left inline-block capitalize-font txt-dark">
								On Development
							</span>
							<span class="pull-right">On Development</span>
							<div class="clearfix"></div>
							<hr class="light-grey-hr row mt-10 mb-10"/>
						</div>
					</div>	
				</div>
			</div>
		</div>
		<div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view">
				<div class="panel-heading">
					<div class="pull-left">
						<h6 class="panel-title txt-dark">My Agenda</h6>
					</div>
					<div class="pull-right">
						<button data-toggle="modal" data-target="#modal_add_agenda" class="btn btn-default btn-icon-anim btn-circle btn-sm"><i class="fa fa-plus"></i></button>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="panel-wrapper collapse in">
					<div class="panel-body">
						<div id="show_agenda_tables">
						</div>
					</div>	
				</div>
			</div>
		</div>
	</div>
	<!-- /Row -->
	<div class="row">
		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view">
				<div class="panel-heading">
					<div class="pull-left">
						<h6 class="panel-title txt-dark">Status Pembayaran</h6>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="panel-wrapper collapse in">
					<div class="panel-body">
						<div>
							<span class="pull-left inline-block capitalize-font txt-dark">
								On Development
							</span>
							<span class="pull-right">On Development</span>
							<div class="clearfix"></div>
						</div>
					</div>	
				</div>
			</div>
		</div>
		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
			<div class="panel panel-default card-view">
				<div class="panel-heading">
					<div class="pull-left">
						<h6 class="panel-title txt-dark">Daftar Kegiatan HSPG Tebet</h6>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="panel-wrapper collapse in">
					<div class="panel-body row">
						<div class="">
							<div class="pl-15 pr-15 mb-15">
								<div class="pull-left">
									<i class="zmdi zmdi-collection-folder-image inline-block mr-10 font-16"></i>
									<span class="inline-block txt-dark">On Development</span>
								</div>	
								<span class="inline-block txt-warning pull-right weight-500">-</span>
								<div class="clearfix"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- /Row -->

</div>
<div class="modal fade" id="modal_add_agenda" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h5 class="modal-title" id="exampleModalLabel1">Insert Agenda</h5>
			</div>
			<div class="modal-body">
				<div class="panel-wrapper collapse in">
					<div class="panel-body">
						<div class="row">
							<div class="col-sm-12 col-xs-12">
								<div class="form-wrap">
									<form>
										<div class="col-lg-12">
											<div class="form-group">
												<div class="col-lg-12">
													<div class="col-lg-6">
														<div class="form-group">
															<label class="control-label mb-10" for="exampleInputuname_1">Judul</label>
															<input class="form-control inline-block" id="id_user" type="hidden" value="<?php echo $_SESSION['logged_in']['id_user'];?>" />
															<input class="form-control inline-block" id="nama_agenda" placeholder="Rekap Keuangan Bulan Juni" type="text"/>
														</div>
													</div>
													<div class="col-lg-6">
														<div class="form-group">
															<label class="control-label mb-10" for="exampleInputuname_1">Tanggal</label>
															<input class="form-control inline-block" id="tanggal_agenda" type="date"/>
														</div>
													</div>
												</div>
												<div class="col-lg-12">
													<div class="col-lg-12">
														<div class="form-group">
															<label class="control-label mb-10" for="exampleInputuname_1">Keterangan</label>
															<input class="form-control inline-block" id="keterangan_agenda" type="text"/>
														</div>
													</div>
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" id="button_clear" class="btn btn-default">Clear</button>
				<button type="button" id="insert_agenda" class="btn btn-primary">Insert New Agenda</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	var latest_periode;
	periode();
	function periode(){
		$.ajax({
			url     : '<?php echo base_url();?>Payment/latest_periode',
			async   : false,
			dataType    : 'json',
			success : function(data){
				var i;
				for(i=0; i<data.length; i++){
					latest_periode = data[i].periode;
				}
				$('#periode').html(latest_periode);
			}
		});
	}

	show_active_student();
	function show_active_student(){
		$.ajax({
			type    : "POST",
			url     : '<?php echo base_url();?>Dashboard/show_active_student',
			async   : false,
			dataType    : 'json',
			data : {parameter:'active'},
			success : function(data){
				var i;
				for(i=0; i<data.length; i++){
					$('#show_active_student').html(data[i].JUMLAH);
				}
			}
		});
	}

	show_all_student();
	function show_all_student(){
		$.ajax({
			type    : "POST",
			url     : '<?php echo base_url();?>Dashboard/show_active_student',
			async   : false,
			dataType    : 'json',
			data : {parameter:'all'},
			success : function(data){
				var i;
				for(i=0; i<data.length; i++){
					$('#show_all_student').html(data[i].JUMLAH);
				}
			}
		});
	}

	show_active_teacher();
	function show_active_teacher(){
		$.ajax({
			url     : '<?php echo base_url();?>Dashboard/show_active_teacher',
			async   : false,
			dataType    : 'json',
			success : function(data){
				var i;
				for(i=0; i<data.length; i++){
					$('#show_active_teacher').html(data[i].JUMLAH);
				}
			}
		});
	}

	show_semester();
	function show_semester(){
		$.ajax({
			url     : '<?php echo base_url();?>Dashboard/show_semester',
			async   : false,
			dataType    : 'json',
			success : function(data){
				var i;
				for(i=0; i<data.length; i++){
					$('#semester').html(data[i].SEMESTER+' '+'('+data[i].ANGKA_SEMESTER+')');
				}
			}
		});
	}

	show_agenda();
	function show_agenda(){
		var id_user = '<?php echo $_SESSION['logged_in']['id_user'];?>';
		$.ajax({
			type    : "POST",
			url     : "<?php echo base_url('Dashboard/show_agenda/');?>",
			dataType    : 'json',
			data : {id_user:id_user},
			success : function(data){
				var i;
				var html = '';
				for(i=0; i<data.length; i++){
					/*$('#show_active_teacher').html(data[i].JUMLAH);*/
					html += '<span class="pull-left inline-block capitalize-font txt-dark">'+data[i].JUDUL+'</span>'+
					'<span class="pull-right">'+data[i].TANGGAL+'</span>'+
					'<div class="clearfix"></div>'+
					'<hr class="light-grey-hr row mt-10 mb-10"/>';
				}
				$('#show_agenda_tables').html(html);
			}
		});
	}

	$('#insert_agenda').on('click', function() {
		var id_user	=$('#id_user').val();
		var nama_agenda	=$('#nama_agenda').val();
		var keterangan_agenda	=$('#keterangan_agenda').val();
		var tanggal_agenda	=$('#tanggal_agenda').val();
		$.ajax({
			type    : "POST",
			url     : "<?php echo base_url('Dashboard/insert_agenda/');?>",
			dataType    : 'json',
			data : {id_user:id_user, nama_agenda:nama_agenda, keterangan_agenda:keterangan_agenda, tanggal_agenda:tanggal_agenda},
			success : function(data){
				if (data == true) {
					notif_sukses('Sukses menginsert agenda');
					show_agenda();
					$('#modal_add_agenda').modal('hide');
				} else if (data == false) {
					notif_gagal('Unable to process');
				}
			}, error: function(xhr, status, error){
				var errorMessage = xhr.status + ': ' + xhr.statusText
				notif_gagal(errorMessage);
			}
		});
	});

	function notif_sukses(message){
		$.toast({
			heading: message,
			text: '',
			position: 'top-right',
			loaderBg:'#f2b701',
			icon: 'success',
			hideAfter: 3500, 
			stack: 6
		});
	}
	function notif_gagal(message){
		$.toast({
			heading: message,
			text: '',
			position: 'top-right',
			loaderBg:'#f2b701',
			icon: 'error',
			hideAfter: 3500
		});
	}
</script>